{% extends 'robox/base_generic.html' %}

{% block title %}Parser docs{% endblock %}
{% block heading %}Parser docs:{% endblock %}
{% block links %}
    {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static "docs/css/docs_base.css" %}" />
    <link rel="stylesheet" type="text/css" href="{% static "docs/css/parser.css" %}" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
{% endblock %}
{% block content %}
    <h3>Adding a parser:</h3>
    <p>To add a parser, simply place the parser.py file into the parsers/parsers directory and restart the server.</p>

    <h3>Creating a parser</h3>
    <p>A parser file should looks something like this:</p>
    <pre><code class="python">
        from parsers import make_and_add_parser

        def accept(file):
            # Return true if the passed in file can be parsed, false otherwise.

        parse(file):
            # Yield a dictionary corresponding to each entry in the file.
            #e.g:
            for line in file:
                yield {"name: "concentration", "address": slot, "value": concentration, "units": "nM"}

        make_and_add_parser("parser_description", parse, accept)
    </code></pre>
    <p></p>
    <p>The <strong>"parser_description"</strong> string should be a unique code for identifying which parser the file was parsed with.</p>
{% endblock %}